                                    display: true,
                                    text: "Años"
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: "Cantidad de Estudiantes"
                                }
                            }
                        }
                    }
                });

                // Descargar el gráfico como PNG
                setTimeout(() => {
                    const link = document.createElement("a");
                    link.href = chart.toBase64Image();
                    link.download = "grafico.png";
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);

                    // Cerrar la pestaña después de la descarga
                    setTimeout(() => {
                        window.close();
                    }, 1000);
                }, 2000); // Espera a que el gráfico se renderice antes de exportar
            } catch (e) {
                console.error("Error procesando los datos:", e);
                alert("Hubo un error al procesar los datos.");
            }
        }
    </script>
    <p>Generando gráfico... Si la descarga no inicia, revisa la configuración del navegador.</p>
</body>
</html>
